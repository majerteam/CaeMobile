#:import SlideTransition kivy.uix.screenmanager.SlideTransition

FloatLayout:
    ScreenManager:
        transition: SlideTransition()
        MenuScreen:
            name: 'menu'

        AddScreen:
            name: 'add'

        BacklogScreen:
            name: 'backlog'

        SettingsScreen:
            name: 'settings'


<MenuScreen>:
    BoxLayout:
        size_hint: .9, .9
        pos_hint: {'center_x': .5, 'center_y': .5}
        orientation: 'vertical'

        Label:
            canvas.before:
                Color:
                    rgba: 0.7, 0.2, 0.35, 1.0
                Rectangle:
                    pos: self.pos
                    size: self.size

            text: 'Notes de frais'

        Widget:
            size_hint_y: None
            height: sp(20)
        Button:
            text: 'Ajouter'
            on_press:
                root.manager.transition.direction = 'left'
                root.manager.current = 'add'

        Widget:
            size_hint_y: None
            height: sp(20)
        Button:
            text: 'Voir'
            on_press:
                root.manager.transition.direction = 'left'
                root.manager.current = 'backlog'
        Widget:
            size_hint_y: None
            height: sp(20)
        Button:
            text: 'Settings'
            on_press:
                root.manager.transition.direction = 'down'
                root.manager.current = 'settings'

<SettingsScreen@Screen>:
    BoxLayout:
        orientation: 'vertical'
        Button:
            size_hint_y: None
            height: sp(20)
            text: 'Retour'
            on_press:
                root.manager.transition.direction = 'up'
                root.manager.current = 'menu'
        GridLayout:
            size_hint: 0.9, 0.9
            center: root.center
            cols: 2

            Label:
                text: 'login'
            TextInput:
                text: app.settings.login
                on_text: app.settings.login = args[2]

            Label:
                text: 'password'
            TextInput:
                text: app.settings.password
                on_text: app.settings.password = args[2]
                password: True

            Label:
                text: 'sync on wifi only'
            Switch:
                value: app.settings.sync_wifi
                on_value: app.settings.sync_wifi = args[2]


<AddScreen>:
    ndf_type: spinner_type.text
    BoxLayout:
        orientation: 'vertical'
        Button:
            size_hint_y: None
            height: sp(20)
            text: 'Retour'
            on_press:
                root.manager.transition.direction = 'right'
                root.manager.current = 'menu'
        Widget:
            size_hint_y: None
            height: sp(20)

        Spinner:
            size_hint_y: None
            height: sp(50)
            id: spinner_type
            text: 'type'
            values: 'km', 'tel', 'autre'

        Widget:

<BacklogScreen>:
    BoxLayout:
        orientation: 'vertical'
        Button:
            size_hint_y: None
            height: sp(20)
            text: 'Retour'
            on_press:
                root.manager.transition.direction = 'right'
                root.manager.current = 'menu'

        ListView:
            adapter: app.datalist_adapter
